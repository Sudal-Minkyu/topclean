<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/defaulthead}" xmlns="http://www.w3.org/1999/html">

<!-- 사용자 CSS 추가 -->
<th:block layout:fragment="css">
    <style>
    </style>
</th:block>

<!-- 사용자 스크립트 추가 -->
<th:block layout:fragment="script">
    <script src="/assets/js/toppos/head/contract.js"></script>
    <script>
    	$(document).ready(function() {
    		// 탭
			const $tabsBtn = $('.c-tabs__btn');
			const $tabsContent = $('.c-tabs__content');
			
			$tabsBtn.on('click', function() {
				const idx = $(this).index();
				
				$tabsBtn.removeClass('active');
				$tabsBtn.eq(idx).addClass('active');
				$tabsContent.removeClass('active');
				$tabsContent.eq(idx).addClass('active');
				
				AUIGrid.resize(gridId[0]);
				AUIGrid.resize(gridId[1]);
				AUIGrid.resize(gridId[2]);
				AUIGrid.resize(gridId[3]);
			})
    	})
    </script>
</th:block>

<div layout:fragment="content" class="content content--padding">
	<!-- <h2 class="content__heading">계약관리</h2> -->
	
	<div class="c-tabs">
		<div class="c-tabs__head">
			<button class="c-tabs__btn active">지사 계약 관리</button>
			<button class="c-tabs__btn">가맹점 계약 관리</button>
			<button class="c-tabs__btn">가맹점 지사 배정 관리</button>
		</div>
		
		<div class="c-tabs__body">
			<div class="c-tabs__content active">
				<div class="contract">
					<div class="contract__list-area contract__list-area--flex">
						<div class="contract__list">
							<div class="contract__head"><h3>계약 지사 리스트</h3></div>
							<div class="contract__body">
								<!-- grid 들어갈 영역 -->
								<div id="grid_contract_0" style="height: 680px;"></div>
							</div>
						</div>
					</div>
					<div class="contract__regist">
						<div class="contract__head"><h3>지사 계약 정보</h3></div>
						<div class="contract__body">
							<form id="brFormData" enctype="multipart/form-data">
								<div class="form">
									<ul class="form__list">
										<li class="form__item form__item--100">
											<div class="form__title">지사코드</div>
											<div class="form__input">
												<div class="c-text-button">
													<input type="text" name="brCode" id="brCode" maxlength="2" />
								                    <input type="hidden" id="brCodeChecked" value="0">
								                    <button type="button" class="c-button" id="brCodeChkBtn" onclick="codeOverlap(1)">중복확인</button>
												</div>
											</div>
										</li>
										<li class="form__item form__item--100">
											<div class="form__title">지사명</div>
											<div class="form__input">
												<input type="text" name="brName" id="brName" />
											</div>
										</li>
										<li class="form__item form__item--100">
											<div class="form__title">계약일자</div>
											<div class="form__input">
												<input type="text" class="c-date" id="brContractDt" name="brContractDt" maxlength="10" placeholder="연 - 월 - 일" readonly>
											</div>
										</li>
										<li class="form__item form__item--100">
											<div class="form__title">계약상태</div>
											<div class="form__input">
												<div class="c-select">
								                    <select id="brContractState" name="brContractState">
								                        <option value="01">진행중</option>
								                        <option value="02">계약완료</option>
								                    </select>
								                </div>
											</div>
										</li>
										<li class="form__item form__item--100">
											<div class="form__title">계약기간</div>
											<div class="form__input">
												<input type="text" class="c-date" id="brContractFromDt" name="brContractFromDt" maxlength="10" placeholder="연 - 월 - 일" readonly>
							                    ~
							                    <input type="text" class="c-date" id="brContractToDt" name="brContractToDt" maxlength="10" placeholder="연 - 월 - 일" readonly>
											</div>
										</li>										
										<li class="form__item form__item--100">
											<div class="form__title">정산비율</div>
											<div class="form__input">
												<ul class="percent">
													<li>
														<div class="percent__title">본사 : </div>
														<div class="percent__input">
															<input type="number" id="brCarculateRateHq" name="brCarculateRateHq" onkeyup="validateNumber(this, 1)" onchange="validateNumber(this, 1)"/>
															<span>%</span>
														</div>
														
													</li>
													<li>
														<div class="percent__title">지사 : </div>
														<div class="percent__input">
															<input type="number" id="brCarculateRateBr" name="brCarculateRateBr" onkeyup="validateNumber(this, 1)" onchange="validateNumber(this, 1)"/>
															<span>%</span>
														</div>
														
													</li>
													<li>
														<div class="percent__title">가맹 : </div>
														<div class="percent__input">
															<input type="number" id="brCarculateRateFr" name="brCarculateRateFr" onkeyup="validateNumber(this, 1)" onchange="validateNumber(this, 1)"/>
															<span>%</span>
														</div>
													</li>
												</ul>
											</div>
										</li>
										<li class="form__item form__item--100">
											<div class="form__title">특이사항</div>
											<div class="form__input">
												<textarea  id="brRemark" name="brRemark"></textarea>
											</div>
										</li>
									</ul>
								</div>
								
								<ul class="article__console article__console--right">
									<li><button type="button" class="c-button c-button--solid" onclick="createNewPost(0)">신규</button></li>
									<li><button type="button" class="c-button c-button--darksolid" onclick="branchSave()">저장</button></li>
									<li><button type="button" class="c-button c-button--red">삭제</button></li>
								</ul>
							</form>
						</div>
					</div>
				</div>
			</div>
			
			<div class="c-tabs__content">
				<div class="contract">
					<div class="contract__list-area contract__list-area">
						<div class="contract__list">
							<div class="contract__head"><h3>가맹점 리스트</h3></div>
							<div class="contract__body">
								<div class="contract__search">
									<div class="search-form search-form--right">
										<ul class="search-form__list">
											<li class="search-form__item">
												<div class="search-form__title">가맹점명</div>
												<div class="search-form__input">
													<input id="frNameFilter" type="text">
												</div>
											</li>
										</ul>
										<ul class="seach-form__console">
											<li class="search-form__btn">
												<button type="button" class="c-button c-button--solid" onclick="filterFranchiseList(1)">검색</button>
											</li>
											<li class="search-form__btn">
												<button type="button" class="c-button" onclick="filterFranchiseList(2)">초기화</button>
											</li>
										</ul>
									</div>
								</div>
								
								<!-- grid 들어갈 영역 -->
								<div id="grid_contract_1" style="width: 100%; height: 610px;"></div>
							</div>
						</div>
					</div>
					<div class="contract__regist">
						<div class="contract__head"><h3>가맹점 계약 정보</h3></div>
						<div class="contract__body">
							<div class="form">
								<form id="frFormData" enctype="multipart/form-data">
									<ul class="form__list">
										<li class="form__item form__item--100">
											<div class="form__title">가맹점코드</div>
											<div class="form__input">
												<div class="c-text-button">
													<input type="text" id="frCode" name="frCode" maxlength="3" />
								                    <input type="hidden" id="frCodeChecked" value="0">
								                    <button type="button" class="c-button" id="frCodeChkBtn" onclick="codeOverlap(2)">중복확인</button>
												</div>
											</div>
										</li>
										<li class="form__item form__item--100">
											<div class="form__title">가맹점명</div>
											<div class="form__input">
												<input type="text" id="frName" name="frName" />
											</div>
										</li>
										<li class="form__item form__item--100">
											<div class="form__title">가맹점관리코드</div>
											<div class="form__input">
												<input type="text" id="frRefCode" name="frRefCode">
											</div>
										</li>
										<li class="form__item form__item--100">
											<div class="form__title">계약일자</div>
											<div class="form__input">
												<input id="frContractDt" class="c-date" name="frContractDt" type="text" maxlength="10" placeholder="연 - 월 - 일" readonly>
											</div>
										</li>
										<li class="form__item form__item--100">
											<div class="form__title">계약상태</div>
											<div class="form__input">
												<div class="c-select">
								                    <select id="frContractState" name="frContractState">
								                        <option value="01">진행중</option>
								                        <option value="02">계약완료</option>
								                    </select>
								                </div>
											</div>
										</li>
										<li class="form__item form__item--100">
											<div class="form__title">계약기간</div>
											<div class="form__input">
												<input id="frContractFromDt" class="c-date" name="frContractFromDt" type="text" maxlength="10" placeholder="연 - 월 - 일" readonly />
							                    ~
							                    <input id="frContractToDt" class="c-date" name="frContractToDt" type="text" maxlength="10" placeholder="연 - 월 - 일" readonly />
											</div>
										</li>
										<li class="form__item form__item--100">
											<div class="form__title">적용가격등급</div>
											<div class="form__input">
												<div class="c-select">
								                    <select id="frPriceGrade" name="frPriceGrade">
								                        <option value="">선택</option>
								                        <option value="A">A</option>
								                        <option value="B">B</option>
								                        <option value="C">C</option>
								                        <option value="D">D</option>
								                        <option value="E">E</option>
								                    </select>
								                </div>
											</div>
										</li>
										<li class="form__item form__item--100">
											<div class="form__title">사업자번호</div>
											<div class="form__input">
												<input type="text" id="frBusinessNo" name="frBusinessNo" maxlength="12"
												onkeyup="onKeyupFrBusinessNo(this)"/>
											</div>
										</li>
										<li class="form__item form__item--100">
											<div class="form__title">대표자</div>
											<div class="form__input">
												<input type="text" id="frRpreName" name="frRpreName" />
											</div>
										</li>
										<li class="form__item form__item--100">
											<div class="form__title">매장전화</div>
											<div class="form__input">
												<input type="text" id="frTelNo" name="frTelNo" onkeyup="onKeyupFrTelNo(this)" />
											</div>
										</li>
										<li class="form__item form__item--100">
											<div class="form__title">가맹점택코드<br />(3자리)</div>
											<div class="form__input">
												<input type="text" id="frTagNo" name="frTagNo" maxlength="3" />
											</div>
										</li>
										<li class="form__item form__item--100">
											<div class="form__title">출고예정일계산</div>
											<div class="form__input">
												<input type="text" id="frEstimateDuration" name="frEstimateDuration" onkeyup="validateNumber(this, 2)" onchange="validateNumber(this, 2)"><span>일후 출고</span>
											</div>
										</li>
										<li class="form__item form__item--100">
											<div class="form__title">특이사항</div>
											<div class="form__input">
												<textarea id="frRemark" name="frRemark"></textarea>
											</div>
										</li>
									</ul>
									
									<ul class="article__console article__console--right">
										<li><button type="button" class="c-button c-button--solid" onclick="createNewPost(1)">신규</button></li>
										<li><button type="button" class="c-button c-button--darksolid" onclick="franchiseSave()">저장</button></li>
										<li><button type="button" class="c-button c-button--red">삭제</button></li>
									</ul>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
			
			<div class="c-tabs__content">
				<div class="contract">
					<div class="contract__list-area">
						<div class="contract__search">
							<div class="search-form search-form--right">
								<ul class="search-form__list">
									<li class="search-form__item">
										<div class="search-form__title">배정상태</div>
										<div class="search-form__input">
											<div class="c-select">
												<select id="s_brAssignState" name="brAssignState">
									                <option value="">선택안함</option>
									                <option value="01">미배정</option>
									                <option value="02">배정완료</option>
									            </select>
											</div>
										</div>
									</li>
									<li class="search-form__item">
										<div class="search-form__title">가맹점명</div>
										<div class="search-form__input">
											<input id="s_frName" type="text">
										</div>
									</li>
								</ul>
								<ul class="seach-form__console">
									<li class="search-form__btn">
										<button type="button" class="c-button c-button--solid" onclick="filterFranchiseList(3)">검색</button>
									</li>
									<li class="search-form__btn">
										<button type="button" class="c-button" onclick="filterFranchiseList(4)">초기화</button>
									</li>
								</ul>
							</div>
						</div>
						
						<div class="contract__list">
							<div class="contract__head"><h3>계약 지사 리스트</h3></div>
							<div class="contract__body">
								<!-- grid 들어갈 영역 -->
								<div id="grid_contract_2" style="height: 265px;"></div>
							</div>
						</div>
						<div class="contract__list">
							<div class="contract__head"><h3>계약 가맹점 리스트</h3></div>
							<div class="contract__body">
								<!-- grid 들어갈 영역 -->
								<div id="grid_contract_3" style="height: 260px;"></div>
							</div>
						</div>
					</div>
					<div class="contract__regist">
						<div class="contract__head"><h3>지사 계약 정보</h3></div>
						<div class="contract__body">
							<div class="form">
								<ul class="form__list">
									<li class="form__item form__item--100">
										<div class="form__title">가맹점코드</div>
										<div class="form__input">
											<input id="bot_frCode" type="text" readonly>
										</div>
									</li>
									<li class="form__item form__item--100">
										<div class="form__title">가맹점명</div>
										<div class="form__input">
											<input id="bot_frName" type="text" readonly>
										</div>
									</li>
									<li class="form__item form__item--100">
										<div class="form__title">계약일자</div>
										<div class="form__input">
											<input class="c-date" id="bot_frContractDt" type="text" readonly>
										</div>
									</li>
									<li class="form__item form__item--100">
										<div class="form__title">계약상태</div>
										<div class="form__input">
											<input id="bot_frContractStateValue" type="text" readonly>
										</div>
									</li>
									<li class="form__item form__item--100">
										<div class="form__title">계약기간</div>
										<div class="form__input">
											<input class="c-date" id="bot_frContractFromDt" type="text" readonly>
							                ~
							                <input class="c-date" id="bot_frContractToDt" type="text" readonly>
										</div>
									</li>
									<li class="form__item form__item--100">
										<div class="form__title form__item--100">지사</div>
										<div class="form__input">
											<div class="c-text-button">
												<div class="c-text-button__dual-input">
													<input id="bot_brCode" type="text" readonly>
									                <input id="bot_brName" type="text" readonly>
												</div>
								                <button class="c-button" type="button" onclick="brListPop()">지사변경</button>
											</div>
										</div>
									</li>
									<li class="form__item form__item--100">
										<div class="form__title">배정상태</div>
										<div class="form__input">
											<div class="c-select">
												<select id="bot_brAssignState">
								                    <option value="01">미배정</option>
								                    <option value="02">배정완료</option>
								                </select>
											</div>
										</div>
									</li>
									<li class="form__item form__item--100">
										<div class="form__title">정산비율</div>
										<div class="form__input">
											<ul class="percent">
												<li>
													<div class="percent__title">본사 : </div>
													<div class="percent__input">
														<input id="bot_brCarculateRateHq" type="number" readonly>
														<span>%</span>
													</div>
													
												</li>
												<li>
													<div class="percent__title">지사 : </div>
													<div class="percent__input">
														<input id="bot_brCarculateRateBr" type="number" readonly>
														<span>%</span>
													</div>
													
												</li>
												<li>
													<div class="percent__title">가맹 : </div>
													<div class="percent__input">
														<input id="bot_brCarculateRateFr" type="number" readonly>
														<span>%</span>
													</div>
												</li>
											</ul>
										</div>
									</li>
								</ul>
								
								<ul class="article__console article__console--right">
									<li><button type="button" class="c-button c-button--darksolid" onclick="assignmentSave()">저장</button></li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>



    <!-- 지사 팝업 -->
    <div class="l-popup" id="branch_popup">
        <div class="l-popup__container">
            <div class="l-popup__head">
                <h3 class="l-popup__heading">지사 선택</h3>
            </div>
            <div class="l-popup__content">
                <div class="l-popup__section">
                	<div class="search-form search-form--right">
						<ul class="search-form__list">
							<li class="search-form__item">
								<div class="search-form__title">지사명</div>
								<div class="search-form__input">
									<input type="text" id="pop_s_brName" />
								</div>
							</li>
							<li class="search-form__item">
								<div class="search-form__title">지사코드</div>
								<div class="search-form__input">
									<input type="text" id="pop_s_brCode" maxlength="2" />
								</div>
							</li>
							<li class="search-form__item">
								<div class="search-form__title">계약상태</div>
								<div class="search-form__input">
									<div class="c-select">
										<select id="pop_s_brContractState" name="pop_s_brContractState">
		                                    <option value="">모두</option>
		                                    <option value="01">진행중</option>
		                                    <option value="02">계약완료</option>
		                                </select>
									</div>
								</div>
							</li>
						</ul>
						<ul class="seach-form__console">
							<li class="search-form__btn">
								<button class="c-button c-button--darksolid" type="button" onclick="filterBranchList(1)">조회</button>
							</li>
						</ul>
					</div>
                </div>
                
                <div class="l-popup__section">
                    <div id="grid_branchList"></div>
                </div>
            </div>
            <div class="l-popup__console">
				<button onclick="branchClose()" class="c-button c-button--dark">팝업닫기</button>
			</div>
        </div>
    </div>

</div>
</html>
